{% extends "base.html" %}

{% block content %}

<h1>All Reviews</h1>
<a class="btn btn-secondary" href="{% url 'submit_review' %}">
    <button>Write a review</button>
</a>

<div class="review-list">
    <ul>
        {% for review in reviews %}
            <li>
                <strong>Title:</strong> {{ review.title }}<br>
                <strong>Visit Date:</strong> {{ review.visit_date }}<br>
                <div>
                    <strong>Overall:</strong> 
                    <span class="stars">
                        {% for i in rating_range %}
                            {% if i <= review.overall_rating %}
                                ★ 
                            {% else %}
                                <span class="star-empty">★</span>
                            {% endif %}
                        {% endfor %}
                    </span>
                </div>
                <div>
                    <strong>Food:</strong> 
                    <span class="stars">
                        {% for i in rating_range %}
                            {% if i <= review.food_rating %}
                                ★ 
                            {% else %}
                                <span class="star-empty">★</span>
                            {% endif %}
                        {% endfor %}
                    </span>
                </div>
                <div>
                    <strong>Service:</strong> 
                    <span class="stars">
                        {% for i in rating_range %}
                            {% if i <= review.service_rating %}
                                ★ 
                            {% else %}
                                <span class="star-empty">★</span>
                            {% endif %}
                        {% endfor %}
                    </span>
                </div>
                <div>
                    <strong>Ambience:</strong> 
                    <span class="stars">
                        {% for i in rating_range %}
                            {% if i <= review.ambience_rating %}
                                ★ 
                            {% else %}
                                <span class="star-empty">★</span>
                            {% endif %}
                        {% endfor %}
                    </span>
                </div>
                <strong>Comment:</strong> {{ review.comment }}<br>
                <span>Created by {{ review.user.username }} on {{ review.created_on }}</span>
                {% if review.user == request.user %}
                    <a href="{% url 'edit_review' review.id %}">Edit</a>
                {% endif %}
                {% if review.user == request.user %}
                    <a href="{% url 'delete_review' review.id %}">Delete</a>
                {% endif %}
            </li>
        {% empty %}
            <li>No reviews yet</li>
        {% endfor %}
    </ul>
    
</div>
{% endblock %}